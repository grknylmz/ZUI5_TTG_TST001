sap.ui.controller("zui5_ttg_app001.PendingSales", {































































































































































































































































































































































































































































































































	navBack	: function() {































































































































































































































































		sap.ui.getCore().getEventBus().publish(































































































































































































































































				"nav", 































































































































































































































































				"to", {































































































































































































































































				  viewName: "zui5_ttg_app001.Main",































































































































































































































































				  viewId: "Main"































































































































































































































































			});































































































































































































































































	},































































































































































































































































































































































































































































































































	initLoad	: function() {































































































































































































































































		































































































































































































































































		jQuery.sap.require("sap.ui.core.format.NumberFormat");































































































































































































































































				var oNumberFormat = sap.ui.core.format.NumberFormat.getFloatInstance({































































































































































































































































					  minFractionDigits: 2,































































































































































































































































					  maxFractionDigits: 2,































































































































































































































































					  groupingEnabled: false,































































































































































































































































					  decimalSeparator: ","































































































































































































































































					});































































































































































































































































		































































































































































































































































		var that = this;































































































































































































































































		































































































































































































































































		var oList = this.getView().byId("pendingSalesTable");































































































































































































































































		































































































































































































































































		var oDateType = new sap.ui.model.type.DateTime({































































































































































































































































			source: { pattern: "yyyyMMdd" },































































































































































































































































			pattern: "dd.MM.yyyy"































































































































































































































































		});































































































































































































































































		































































































































































































































































		var oBusyDialog = new sap.m.BusyDialog({ text : "Lütfen bekleyiniz" });































































































































































































































































		































































































































































































































































		var oFilter = [ new sap.ui.model.Filter("DealerId", sap.ui.model.FilterOperator.EQ, sDealerID) ];































































































































































































































































		































































































































































































































































		var mParameters = { async			: false,































































































































































































































































							filters 	  	: oFilter,































































































































































































































































							urlParameters 	: null,































































































































































































































































							success			: function(oData) {































































































































































































































































								































































































































































































































































								oDataPending = oData;































































































































































































































































								































































































































































































































































								oList.removeAllItems();































































































































































































































































								































































































































































































































































								for (var i = 0; i < oData.results.length; i++) {































































































































































































































































									































































































































































































































































									var oDate = new Date(oData.results[i].Erdat);































































































































































































































































































































































































































































































































									var sDate = String(oDate.getDate()) + "." + String(oDate.getMonth() + 1) + "." + String(oDate.getFullYear());































































































































































































































































									var sTime = oData.results[i].Erzet.substring(2,4) + ":" + oData.results[i].Erzet.substring(5,7) + ":" + oData.results[i].Erzet.substring(8,10);































































































































































































































































									































































































































































































































































									oList.addItem(new sap.m.ColumnListItem({































































































































































































































































										type		: sap.m.ListType.Inactive, //sap.m.ListType.Detail,































































































































































































































































//										detailPress	: that.onDetailPress,































































































































































































































































										cells		: [































































































































































































































































										     		   new sap.m.ObjectIdentifier({ text: oData.results[i].Proid }),































































































































































































































































										     		   new sap.m.Text({ text: oData.results[i].Vbeln }),































































































































































































































































										     		   new sap.m.Text({ text: sDate }),































































































































































































































































										     		   new sap.m.Text({ text: sTime }),































































































































































































































































										     		   new sap.m.ObjectNumber({































































































































































































































































										     			   number : oNumberFormat.format(oData.results[i].Netwr),































































































































































































































































										     			   unit	  : "TL"































































































































































































































































										     		   }),































































































































































































































































										     		   new sap.m.Text({ text: oData.results[i].Name4 }),































































































































































































































































										     		   new sap.m.Text({ text: oData.results[i].Name1 }),































































































































































































































































										     		   new sap.m.Text({ text: oData.results[i].Fname }),































































































































































































































































										     		   new sap.m.Text({ text: oData.results[i].SatAdSoyad }),































































































































































































































































										     		   new sap.m.Text({ text: oData.results[i].Proid }),































































































































































































































































										     		   //CK adding































































































































































































































































										     		   new sap.m.Text({ text: oData.results[i].Firma })































































































































































































































































										     		  ]































































































































































































































































									}));































































































































































































































































								}































































































































































































































































































































































































































































































































								oBusyDialog.close();































































































































































































































































							},































































































































































































































































							error			: function() {































































































































































































































































								oBusyDialog.close();































































































































































































































































							}































































































































































































































































			  };































































































































































































































































		































































































































































































































































		var oModel = new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/", false);































































































































































































































































		































































































































































































































































		oBusyDialog.open();































































































































































































































































		oModel.read("/bekleyenSatisSet?$expand=bekSatisToItem", mParameters);































































































































































































































































	},































































































































































































































































	































































































































































































































































/**































































































































































































































































* Called when a controller is instantiated and its View controls (if available) are already created.































































































































































































































































* Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.































































































































































































































































* @memberOf zui5_ttg_app001.PendingSales































































































































































































































































*/































































































































































































































































	onInit: function() {































































































































































































































































		this.getView().addEventDelegate({































































































































































































































































			onBeforeShow : jQuery.proxy(function(evt) {































































































































































































































































				































































































































































































































































				this.onBeforeShow(evt);































































































































































































































































				































































































































































































































































				}, this) });































































































































































































































































	},































































































































































































































































	































































































































































































































































	onBeforeShow	: function() {































































































































































































































































		this.initLoad();































































































































































































































































	},































































































































































































































































































































































































































































































































	onDetailPress	: function(oEvent) {	































































































































































































































































		var oView = sap.ui.getCore().byId("PendingSales");































































































































































































































































		































































































































































































































































		if (oView.byId("pendingSalesTable").getSelectedItems() == undefined ||































































































































































































































































			oView.byId("pendingSalesTable").getSelectedItems().length > 1)































































































































































































































































			return;		































































































































































































































































		































































































































































































































































		sap.ui.getCore().getEventBus().publish(































































































































































































































































				"nav", 































































































































































































































































				"to", {































































































































































































































































				  viewName: "zui5_ttg_app001.Sale",































































































































































































































































				  viewId: "Sale",































































































































































































































































				  data: {































































































































































































































































					 editSaleId: oView.byId("pendingSalesTable").getSelectedItems()[0].getCells()[1].getText(), //oEvent.getSource().getCells()[0].getText(),































































































































































































































































					 saleType: "S"































































































































































































































































				}































































































































































































































































			});































































































































































































































































		































































































































































































































































































































































































































































































































	},































































































































































































































































	































































































































































































































































	cancelOrder		: function() {































































































































































































































































		var oView = sap.ui.getCore().byId("PendingSales");































































































































































































































































		var that = oView.getController();































































































































































































































































		































































































































































































































































		var aItems = oView.byId("pendingSalesTable").getSelectedItems();































































































































































































































































		































































































































































































































































		var oBusyDialog = new sap.m.BusyDialog({ text : "Lütfen bekleyiniz" });		































































































































































































































































		var oModel = new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/", false);































































































































































































































































		































































































































































































































































		var sProid = oView.byId("pendingSalesTable").getSelectedItem().getCells()[0].getText();































































































































































































































































		































































































































































































































































		var oFilter = [































































































































































































































































		               new sap.ui.model.Filter("DealerId", sap.ui.model.FilterOperator.EQ, sDealerID),































































































































































































































































//		               new sap.ui.model.Filter("Provision", sap.ui.model.FilterOperator.EQ, sProid)































































































































































































































































		               ];































































































































































































































































		































































































































































































































































		for (var i = 0; i < aItems.length; i++) {































































































































































































































































			oFilter.push(new sap.ui.model.Filter("Provision", sap.ui.model.FilterOperator.EQ, aItems[i].getCells()[0].getText()));































































































































































































































































		}































































































































































































































































		































































































































































































































































		var mParameters = { async			: false,































































































































































































































































							filters 	  	: oFilter,































































































































































































































































							urlParameters 	: null,































































































































































































































































							success			: function(oData) {































































































































































































































































												































































































































































































































































												oBusyDialog.close();































































































































































































































































												var sMessage = "";































































































































































































































































												for (var i = 0; i < oData.results.length; i++) {































































































































































































































































													sMessage += oData.results[i].Provision + " - " + oData.results[i].Errordesc + "\n";































































































































































































































































												}































































































































































































































































												var oMessageData = { TYPE: "I", MESSAGE: sMessage};































































































































































































































































												that.showMessage(oMessageData);































































































































































































































































												that.initLoad();































































































































































































































































								  			},































































































































































































































































							error			: function() {































































































































































































































































												oBusyDialog.close();































































































































































































































































												var oMessageData = { TYPE:"E", MESSAGE:"Bağlantı hatası!"};































































































































































































































































												that.showMessage(oMessageData);































































































































































































































































											}































































































































































































































































						};































































































































































































































































































































































































































































































































		oBusyDialog.open();































































































































































































































































		oModel.read("/cancelOrderSet", mParameters);































































































































































































































































	},































































































































































































































































	































































































































































































































































	onCancelPress	: function() {































































































































































































































































		var oView = sap.ui.getCore().byId("PendingSales");































































































































































































































































		































































































































































































































































		if (oView.byId("pendingSalesTable").getSelectedItems() == undefined)































































































































































































































































			return;































































































































































































































































		































































































































































































































































		if (!this.oCancelDialog) {































































































































































































































































			this.oCancelDialog = new sap.m.Dialog({































































































































































































































































				title		: "İşlemi onaylayın",































































































































































































































































				leftButton	: new sap.m.Button({































































































































































































































































					text	: "Hayır",































































































































































































































































					icon 	: "sap-icon://sys-cancel",































































































































































































































































					press	: function(){































































































































































































































































						this.oParent.close();































































































































































































































































						}































































































































































































































































					}),































































































































































































































































				rightButton	: new sap.m.Button({































































































































































































































































					text	: "Evet",































































































































































































































































					icon 	: "sap-icon://accept",































































































































































































































































					press	: function(){































































































































































































































































						this.oParent.close();































































































































































































































































						oView.getController().cancelOrder();































































































































































































































































						}































































































































































































































































					}),































































































































































































































































				content: [ new sap.m.Text({ text: "Seçili siparişi iptal etmek istiyor musunuz?" }) ]































































































































































































































































					});































































































































































































































































			}		































































































































































































































































































































































































































































































































		this.oCancelDialog.open();































































































































































































































































	},































































































































































































































































	































































































































































































































































	onRefresh	: function() {































































































































































































































































		sap.ui.getCore().byId("PendingSales").getController().initLoad();































































































































































































































































	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Display message































































































































































































































































* @memberOf zui5_ttg_app001.PendingSales































































































































































































































































*/	































































































































































































































































	showMessage	: function(data) {































































































































































































































































				































































































































































































































































		jQuery.sap.require("sap.m.MessageBox");































































































































































































































































				































































































































































































































































		var oIcon, sTitle;































































































































































































































































				































































































































































































































































		switch (data.TYPE) {































































































































































































































































			case "S": oIcon = sap.m.MessageBox.Icon.SUCCESS; 	 break;































































































































































































































































			case "I": oIcon = sap.m.MessageBox.Icon.INFORMATION; break;































































































































































































































































			case "E": oIcon = sap.m.MessageBox.Icon.ERROR;		 break;































































































































































































































































			case "W": oIcon = sap.m.MessageBox.Icon.WARNING;	 break;































































































































































































































































			default: break;































































































































































































































































		}































































































































































































































































				































































































































































































































































		   sap.m.MessageBox.show( data.MESSAGE, { icon	: oIcon,































































































































































































































































		    									  title	: sTitle,































































































































































































































































		    		          		   			  actions: [sap.m.MessageBox.Action.OK],































































































































































































































































		    		      						});































































































































































































































































	},































































































































































































































































	































































































































































































































































/**































































































































































































































































* Similar to onAfterRendering, but this hook is invoked before the controller's View is re-rendered































































































































































































































































* (NOT before the first rendering! onInit() is used for that one!).































































































































































































































































* @memberOf zui5_ttg_app001.PendingSales































































































































































































































































*/































































































































































































































































//	onBeforeRendering: function() {































































































































































































































































//































































































































































































































































//	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Called when the View has been rendered (so its HTML is part of the document). Post-rendering manipulations of the HTML could be done here.































































































































































































































































* This hook is the same one that SAPUI5 controls get after being rendered.































































































































































































































































* @memberOf zui5_ttg_app001.PendingSales































































































































































































































































*/































































































































































































































































//	onAfterRendering: function() {































































































































































































































































//































































































































































































































































//	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Called when the Controller is destroyed. Use this one to free resources and finalize activities.































































































































































































































































* @memberOf zui5_ttg_app001.PendingSales































































































































































































































































*/































































































































































































































































//	onExit: function() {































































































































































































































































//































































































































































































































































//	}































































































































































































































































































































































































































































































































});