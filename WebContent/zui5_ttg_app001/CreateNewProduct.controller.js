sap.ui.controller("zui5_ttg_app001.CreateNewProduct", {































































































































































































































































































































































































































































































































	navBack	: function() {































































































































































































































































		sap.ui.getCore().getEventBus().publish(































































































































































































































































				"nav", 































































































































































































































































				"to", {































































































































































































































































				  viewName: "zui5_ttg_app001.Main",































































































































































































































































				  viewId: "Main"































































































































































































































































			});































































































































































































































































	},































































































































































































































































	































































































































































































































































/**































































































































































































































































* Called when a controller is instantiated and its View controls (if available) are already created.































































































































































































































































* Can be used to modify the View before it is displayed, to bind event handlers and do other one-time initialization.































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































	onInit: function() {































































































































































































































































		































































































































































































































































		// model for value states































































































































































































































































		this.model = new sap.ui.model.json.JSONModel();































































































































































































































































		this.model.setData({































































































































































































































































			stockCodeState		: "Error",































































































































































































































































			prodDescriptionState: "Error",































































































































































































































































			branchPriceState	: "Error",































































































































































































































































			colorState			: "Error"































































































































































































































































		});































































































































































































































































		this.getView().setModel(this.model, "state");































































































































































































































































		































































































































































































































































		var that = this;































































































































































































































































		































































































































































































































































		var sStepId = this.getView().getId() + "--newProdStep1";































































































































































































































































		this.getView().byId(sStepId).setEnabled(true);		































































































































































































































































		this.getView().byId("newProdRoadMap").setSelectedStep(sStepId);































































































































































































































































		































































































































































































































































		console.log(this.getView().byId("newProdCollectionUploader").getDomRef());































































































































































































































































		































































































































































































































































		var oBusyDialog = new sap.m.BusyDialog({ text : "Lütfen bekleyiniz" });































































































































































































































































		































































































































































































































































		// model for hierarchy table































































































































































































































































		var oModel = new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/", false);	































































































































































































































































		































































































































































































































































		var mParameters = { async			: true,































































































































































































































































							filters 	  	: null,































































































































































































































































							urlParameters 	: null,































































































































































































































































							success			: function(oData) {































































































































































































































































								































































































































































































































































												var aHierarchy = oData.results;































































































































































































































































									































































































































































































































































												var oModelHierarchy = that.parseJSON(aHierarchy);































































































































































































































































												































































































































































































































































												that.getView().byId("newProdTreeTable").setModel(oModelHierarchy);































































































































































































































































												that.getView().byId("newProdTreeTable").bindRows("/root");































































































































































































































































































































































































































































































































//												that.getView().byId("idHierarchyTable").setModel(oModelHierarchy);































































































































































































































































//												that.getView().byId("idHierarchyTable").bindRows("/root");































































































































































































































































									































































































































































































































































												oBusyDialog.close();































































































































































































































































												oGlobalBusyDialog.close();































































































































































































































































								  			  },































































































































































































































































							error			: function() {































































































































































































































































												oBusyDialog.close();































































































































































































































































												oGlobalBusyDialog.close();































































































































































































































































												var oMessageData = { TYPE:"E", MESSAGE:"Bağlantı hatası!"};































































































































































































































































												that.showMessage(oMessageData);































































































































































































































































								  			  }































































































































































































































































						  };































































































































































































































































































































































































































































































































		oBusyDialog.open();































































































































































































































































		oModel.read("/productTypeSet", mParameters);































































































































































































































































		































































































































































































































































		// model for tax selection































































































































































































































































		var oComboTax = that.getView().byId("newProdTaxType");































































































































































































































































		var bExists;































































































































































































































































		































































































































































































































































		var mParameters = { async			: true,































































































































































































































































							filters 	  	: null,































































































































































































































































							urlParameters 	: null,































































































































































































































































							success			: function(oData) {































































































































































































































































								































































































































































































































































												oTaxData = oData;												































































































































































































































































































































































































































































































































												oComboTax.addItem(new sap.ui.core.Item({ key: "dummy", text: "" }));































































































































































































































































												































































































































































































































































												for (var i = 0; i < oData.results.length; i++) {































































































































































































































































													var aItems = oComboTax.getItems();































































































































































































































































													bExists = false;































































































































































































































































													































































































































































































































































													for (var j = 0; j < aItems.length; j++) {































































































































































































































































														if (aItems[j].getKey() == oData.results[i].Kschl)































































































































































































































































															bExists = true;































































































































































































































































													}































































































































































































































































													































































































































































































































































													if (!bExists)































































































































































































































































														oComboTax.addItem(new sap.ui.core.Item({































































































































































































































































															key	: oData.results[i].Kschl,































































































































































































































































															text: oData.results[i].Vtext































































































































































































































































														}));































































































































































































































































												}































































































































































































































































					  			  },































































































































































































































































					  		error			: function() {































































































































































































































































												var oMessageData = { TYPE:"E", MESSAGE:"Vergi bilgileri alınamadı!"};































































































































































































































































												that.showMessage(oMessageData);































































































































































































































































					  			  }































































































































































































































































			  				};































































































































































































































































































































































































































































































































		oModel.read("/taxSet", mParameters);































































































































































































































































		































































































































































































































































		// register before show event































































































































































































































































		this.getView().addEventDelegate({































































































































































































































































			onBeforeShow : jQuery.proxy(function(evt) {































































































































































































































































				































































































































































































































































				this.onBeforeShow(evt);































































































































































































































































				































































































































































































































































				}, this) });		































































































































































































































































	},































































































































































































































































	































































































































































































































































/**                               































































































































































































































































* Before show event































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct  	































































































































































































































































*/	                              	































































































































































































































































	onBeforeShow	: function(oEvent) {































































































































































































































































		































































































































































































































































		console.log("before show");































































































































































































































































		































































































































































































































































		var that = this;































































































































































































































































		































































































































































































































































		// set road map































































































































































































































































		var sCurrentStep = that.getView().byId("newProdRoadMap").getSelectedStep();































































































































































































































































		var step1 	 	 = sCurrentStep.substring(0, sCurrentStep.length - 1) + "1";































































































































































































































































		var step2 	 	 = sCurrentStep.substring(0, sCurrentStep.length - 1) + "2";































































































































































































































































		var step3 	 	 = sCurrentStep.substring(0, sCurrentStep.length - 1) + "3";































































































































































































































































		var step4 	 	 = sCurrentStep.substring(0, sCurrentStep.length - 1) + "4";































































































































































































































































		































































































































































































































































		if (oTaxData == undefined) return;































































































































































































































































		































































































































































































































































		that.getView().byId(step1).setEnabled(true);































































































































































































































































		that.getView().byId(step2).setEnabled(false);































































































































































































































































		that.getView().byId(step3).setEnabled(false);































































































































































































































































		that.getView().byId(step4).setEnabled(false);































































































































































































































































		that.getView().byId("newProdRoadMap").setSelectedStep(step1);































































































































































































































































		































































































































































































































































		// clear content































































































































































































































































		that.getView().byId("newProdTreeTable").collapseAll();































































































































































































































































		that.getView().byId("newProdTreeTable").clearSelection();































































































































































































































































		that.getView().byId("newProdStockCode").setValue("");































































































































































































































































		that.getView().byId("newProdDescription").setValue("");































































































































































































































































		that.getView().byId("newProdColor").setVisible(true);































































































































































































































































		that.getView().byId("newProdColor").setEnabled(true);































































































































































































































































		that.getView().byId("newProdColor").removeAllItems();































































































































































































































































		that.getView().byId("newProdColor").setValue("");































































































































































































































































		that.getView().byId("newProdBranchPrice").setValue("");































































































































































































































































		that.getView().byId("newProdTaxType").setSelectedKey("dummy");































































































































































































































































		that.getView().byId("newProdTaxRatio").setValue("");































































































































































































































































		that.getView().byId("newProdTaxRatio").removeAllItems();































































































































































































































































		that.getView().byId("newProdTaxesTable").removeAllItems();































































































































































































































































		































































































































































































































































//		that.getView().byId("newProdTaxType").fireSelectionChange();































































































































































































































































		































































































































































































































































		var oData = {};































































































































































































































































		that.getView().byId("newProdCollectionUploader").destroyItems();































































































































































































































































		if (that.getView().byId("newProdCollectionUploader").getModel() != undefined)































































































































































































































































			that.getView().byId("newProdCollectionUploader").getModel().setData(oData);































































































































































































































































		































































































































































































































































		that.generalInfoValidation();































































































































































































































































		































































































































































































































































		// go to first page































































































































































































































































		var sCurrentPage = that.getView().byId("newProdNavContainer").getCurrentPage().getId();































































































































































































































































		var page1        = sCurrentPage.substring(0, sCurrentPage.length - 1) + "1";































































































































































































































































		that.getView().byId("newProdNavContainer").to(page1);































































































































































































































































		































































































































































































































































		// set footer content































































































































































































































































		that.getView().byId("newProdFooter").destroyContent();































































































































































































































































		that.getView().byId("newProdFooter").addContent(new sap.m.ToolbarSpacer());































































































































































































































































		that.getView().byId("newProdFooter").addContent(new sap.m.Button({ text	: "Geri",































































































































































































































































			  								  							   type	: sap.m.ButtonType.Emphasized,































































































































































































































































			  								  							   icon	: "sap-icon://slim-arrow-left",































































































































































































































































			  								  							   press: that.newProdRoadMapBack }));































































































































































































































































		that.getView().byId("newProdFooter").addContent(new sap.m.Button({ text	: "İleri",































































































































































































































































			  								  							   type	: sap.m.ButtonType.Emphasized,































































































































































































































































			  								  							   icon	: "sap-icon://slim-arrow-right",































































































































































































































































			  								  							   press: that.newProdRoadMapForward }));































































































































































































































































	},































































































































































































































































	































































































































































































































































	onTaxSelected	: function(oEvent) {































































































































































































































































		var oComboVal = sap.ui.getCore().byId("CreateNewProduct").byId("newProdTaxRatio");































































































































































































































































		































































































































































































































































		oComboVal.removeAllItems();































































































































































































































































//		oComboVal.setValue("");































































































































































































































































		































































































































































































































































		oComboVal.addItem(new sap.ui.core.Item({































































































































































































































































			key	: "",































































































































































































































































			text: ""































































































































































































































































		}));































































































































































































































































		































































































































































































































































		for (var i = 0; i < oTaxData.results.length; i++) {































































































































































































































































			if (oTaxData.results[i].Kschl == oEvent.getSource().getSelectedKey())































































































































































































































































				oComboVal.addItem(new sap.ui.core.Item({































































































































































































































































					key	: oTaxData.results[i].Taxkm,































































































































































































































































					text: oTaxData.results[i].TaxVtext































































































































































































































































				}));































































































































































































































































		}































































































































































































































































		































































































































































































































































//		if (oEvent.getSource().getSelectedKey() == "MWSI")































































































































































































































































//			oComboVal.setSelectedKey("3");































































































































































































































































	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Parse oData result to JSON































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































	parseJSON	: function(aHierarchy) {































































































































































































































































		































































































































































































































































		var oModelHierarchy = new sap.ui.model.json.JSONModel();































































































































































































































































		var oRoot  		= {};































































































































































































































































		var oChild1 	= {};































































































































































































































































		var oChild2 	= {};































































































































































































































































		var aRoot		= [];































































































































































































































































		var slevel0Temp = "";































































































































































































































































		var slevel1Temp = "";































































































































































































































































		var bFirstChild = true;































































































































































































































































		































































































































































































































































		for (var i = 0; i < aHierarchy.length; i++) {































































































































































































































































			































































































































































































































































			// first root element































































































































































































































































			if (i == 0) {































































































































































































































































				oRoot = { name: aHierarchy[i].Level0, description: aHierarchy[i].Level0Desc, children: [] };































































































































































































































































				































































































































































































































































				oChild1 = { name: aHierarchy[i].Level1, description: aHierarchy[i].Level1Desc, children: [] };































































































































































































































































				































































































































































































































































				if (aHierarchy[i].Level2 != "") {































































































































































































































































					oChild2 = { name: aHierarchy[i].Level2, description: aHierarchy[i].Level2Desc };					































































































































































































































































					oChild1.children.push(oChild2);































































































































































































































































				}































































































































































































































































				































































































































































































































































				slevel0Temp = aHierarchy[i].Level0;































































































































































































































































				slevel1Temp = aHierarchy[i].Level1;































































































































































































































































				































































































































































































































































				continue;































































































































































































































































			}































































































































































































































































			































































































































































































































































			// element with same root































































































































































































































































			if (aHierarchy[i].Level0 == slevel0Temp) {































































































































































































































































				































































































































































































































































				// element with same level 1































































































































































































































































				if (aHierarchy[i].Level1 == slevel1Temp) {































































































































































































































































					oChild2 = { name: aHierarchy[i].Level2, description: aHierarchy[i].Level2Desc };	































































































































































































































































					oChild1.children.push(oChild2);































































































































































































































































				}































































































































































































































































				// element with same level 0































































































































































































































































				else {	































































































































































































































































					if (bFirstChild) {































































































































































































































































						oRoot.children.push(oChild1);































































































































































































































































						bFirstChild = false;































































































































































































































































					}































































































































































































































































					oChild1 = { name: aHierarchy[i].Level1, description: aHierarchy[i].Level1Desc, children: [] };































































































































































































































































					oChild2 = { name: aHierarchy[i].Level2, description: aHierarchy[i].Level2Desc };































































































































































































































































					oChild1.children.push(oChild2);































































































































































































































































					oRoot.children.push(oChild1);































































































































































































































































					































































































































































































































































					if (!bFirstChild)































































































































































































































































						slevel1Temp = aHierarchy[i].Level1;































































































































































































































































				}































































































































































































































































				































































































































































































































































				slevel0Temp = aHierarchy[i].Level0;































































































































































































































































			}































































































































































































































































			// element with different root































































































































































































































































			else {































































































































































































































































				aRoot.push(oRoot);































































































































































































































































				































































































































































































































































				var oRoot  		= {};































































































































































































































































				var oChild1 	= {};































































































































































































































































				var oChild2 	= {};































































































































































































































































				































































































































































































































































				oRoot = { name: aHierarchy[i].Level0, description: aHierarchy[i].Level0Desc, children: [] };































































































































































































































































				































































































































































































































































				oChild1 = { name: aHierarchy[i].Level1, description: aHierarchy[i].Level1Desc, children: [] };































































































































































































































































				































































































































































































































































				if (aHierarchy[i].Level2 != "") {































































































































































































































































					oChild2 = { name: aHierarchy[i].Level2, description: aHierarchy[i].Level2Desc };					































































































































































































































































					oChild1.children.push(oChild2);































































































































































































































































				}































































































































































































































































				































































































































































































































































				oRoot.children.push(oChild1);































































































































































































































































				































































































































































































































































				slevel0Temp = aHierarchy[i].Level0;































































































































































































































































				slevel1Temp = aHierarchy[i].Level1;































































































































































































































































			}































































































































































































































































			































































































































































































































































			// last element































































































































































































































































			if (i == (aHierarchy.length - 1))































































































































































































































































				aRoot.push(oRoot);































































































































































































































































			































































































































































































































































		}































































































































































































































































		































































































































































































































































		var oData = { root : aRoot };































































































































































































































































		































































































































































































































































		oHierarchyData = oData;































































































































































































































































		oModelHierarchy.setData(oData);































































































































































































































































		































































































































































































































































		return oModelHierarchy;































































































































































































































































	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Road map back































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































	newProdRoadMapBack		: function(oEvent) {































































































































































































































































		































































































































































































































































		var oView 		  = oEvent.getSource().oParent.oParent.oParent;































































































































































































































































		var oController   = oView.getController();































































































































































































































































		var oFooter 	  = oView.byId("newProdFooter");































































































































































































































































		var oRoadMap 	  = oView.byId("newProdRoadMap");































































































































































































































































		var oNavContainer = oView.byId("newProdNavContainer");































































































































































































































































		var sCurrentStep  = oRoadMap.getSelectedStep();































































































































































































































































		var sCurrentPage  = oNavContainer.getCurrentPage().getId();































































































































































































































































		var iStepIndex    = 0;































































































































































































































































		var sPrevStep	  = "";































































































































































































































































		var sPrevPage	  = "";































































































































































































































































		































































































































































































































































		// determine next step































































































































































































































































		iStepIndex = parseInt(sCurrentStep.substr(sCurrentStep.length - 1));































































































































































































































































		iStepIndex--;































































































































































































































































		sPrevStep = sCurrentStep.substring(0, sCurrentStep.length - 1) + String(iStepIndex);































































































































































































































































		































































































































































































































































		// exit view if from first step































































































































































































































































		if (iStepIndex == 0) {































































































































































































































































			sap.ui.getCore().getEventBus().publish("nav", "back");			































































































































































































































































			return;































































































































































































































































		}































































































































































































































































		































































































































































































































































		// set selected step































































































































































































































































		oView.byId(sCurrentStep).setEnabled(false);































































































































































































































































		oView.byId(sPrevStep).setEnabled(true);		































































































































































































































































		oRoadMap.setSelectedStep(sPrevStep);































































































































































































































































		































































































































































































































































		// navigate to next page































































































































































































































































		sPrevPage = sCurrentPage.substring(0, sCurrentPage.length - 1) + String(iStepIndex);































































































































































































































































		oNavContainer.to(sPrevPage);































































































































































































































































		































































































































































































































































		// set footer buttons if from the last page































































































































































































































































		if (iStepIndex == 3) {































































































































































































































































			oFooter.destroyContent();































































































































































































































































			oFooter.addContent(new sap.m.ToolbarSpacer());































































































































































































































































			oFooter.addContent(new sap.m.Button({ text	: "Sil",































































































































































































































































				  								  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  icon	: "sap-icon://delete",































































































































































































































































				  								  press: oController.deleteTaxEntry }));































































































































































































































































			oFooter.addContent(new sap.m.Button({ text	: "Geri",































































































































































































































































				  								  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  icon	: "sap-icon://slim-arrow-left",































































































































































































































































				  								  press: oController.newProdRoadMapBack }));































































































































































































































































			oFooter.addContent(new sap.m.Button({ text	: "İleri",































































































































































































































































				  								  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  icon	: "sap-icon://slim-arrow-right",































































































































































































































































				  								  press: oController.newProdRoadMapForward }));































































































































































































































































		}































































































































































































































































		else {































































































































































































































































			oFooter.destroyContent();































































































































































































































































			oFooter.addContent(new sap.m.ToolbarSpacer());































































































































































































































































			oFooter.addContent(new sap.m.Button({ text	: "Geri",































































































































































































































































				  								  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  icon	: "sap-icon://slim-arrow-left",































































































































































































































































				  								  press: oController.newProdRoadMapBack }));































































































































































































































































			oFooter.addContent(new sap.m.Button({ text	: "İleri",































































































































































































































































				  								  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  icon	: "sap-icon://slim-arrow-right",































































































































































































































































				  								  press: oController.newProdRoadMapForward }));































































































































































































































































		}































































































































































































































































		































































































































































































































































	},































































































































































































































































	































































































































































































































































/**































































































































































































































































* Road map forward































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































	newProdRoadMapForward	: function(oEvent) {































































































































































































































































		































































































































































































































































		var oView 		  	= oEvent.getSource().oParent.oParent.oParent;































































































































































































































































		var oController   	= oView.getController();































































































































































































































































		var oFooter 	  	= oView.byId("newProdFooter");































































































































































































































































		var oRoadMap 	  	= oView.byId("newProdRoadMap");































































































































































































































































		var oNavContainer 	= oView.byId("newProdNavContainer");































































































































































































































































		var oHierarchyTable	= oView.byId("newProdTreeTable");































































































































































































































































		var sCurrentStep  	= oRoadMap.getSelectedStep();































































































































































































































































		var sCurrentPage  	= oNavContainer.getCurrentPage().getId();































































































































































































































































		var iStepIndex    	= 0;































































































































































































































































		var sNextStep	  	= "";































































































































































































































































		var sNextPage	  	= "";































































































































































































































































		var cancelNav		= false;































































































































































































































































		































































































































































































































































		// determine next step































































































































































































































































		iStepIndex = parseInt(sCurrentStep.substr(sCurrentStep.length - 1));































































































































































































































































		iStepIndex++;































































































































































































































































		sNextStep = sCurrentStep.substring(0, sCurrentStep.length - 1) + String(iStepIndex);































































































































































































































































		































































































































































































































































		// check hierarchy selected in first step































































































































































































































































		if (iStepIndex == 2) {































































































































































































































































			































































































































































































































































			if (oHierarchyTable.getSelectedIndex() < 0){































































































































































































































































				var oMessageData = { TYPE:"E", MESSAGE:"Ürün tipi seçin!"};































































































































































































































































				oController.showMessage(oMessageData);































































































































































































































































				return;































































































































































































































































			}































































































































































































































































			































































































































































































































































			// set selected hierarchy on next step































































































































































































































































			var sPath = oHierarchyTable.getBinding("rows").aContexts[oHierarchyTable.getSelectedIndex()].sPath;































































































































































































































































			var aPath = sPath.split("/");































































































































































































































































			































































































































































































































































			if (aPath.length < 7) {































































































































































































































































				var oMessageData = { TYPE:"E", MESSAGE:"Alt kategori ürün tipi seçimi yapılmalıdır!"};































































































































































































































































				oController.showMessage(oMessageData);































































































































































































































































				return;































































































































































































































































			}































































































































































































































































			































































































































































































































































			var index1 = parseInt(aPath[2]);































































































































































































































































			var index2 = parseInt(aPath[4]);































































































































































































































































			var index3 = parseInt(aPath[6]);































































































































































































































































			































































































































































































































































			sSelectedHierarchy = oHierarchyData.root[index1].children[index2].children[index3].name;































































































































































































































































			oView.byId("newProdTypeInput").setValue(oHierarchyData.root[index1].children[index2].children[index3].description);































































































































































































































































			































































































































































































































































			// fill color combo box			































































































































































































































































			oController.setColor(oView, sSelectedHierarchy);































































































































































































































































		}































































































































































































































































		































































































































































































































































		// check required fields on second step































































































































































































































































		if (iStepIndex == 3) {			































































































































































































































































			if (oView.byId("newProdStockCode").getValueState() 	 == "Error" ||































































































































































































































































				oView.byId("newProdDescription").getValueState() == "Error" ||































































































































































































































































				oView.byId("newProdColor").getValueState() 		 == "Error") {































































































































































































































































				































































































































































































































































				var oMessageData = { TYPE:"E", MESSAGE:"Kırmızı ile işaretli alanları kontrol ediniz!"};































































































































































































































































				oController.showMessage(oMessageData);































































































































































































































































				return;































































































































































































































































			}































































































































































































































































			































































































































































































































































			// check entered stock code































































































































































































































































			if (oView.byId("newProdStockCode").getValue().length > 0)































































































































































































































































				oController.checkStockCode(































































































































































































































































						oView.byId("newProdStockCode").getValue(),































































































































































































































































						sCurrentStep,































































































































































































































































						sNextStep,































































































































































































































































						sCurrentPage);































































































































































































































































			































































































































































































































































			// set default tax type and value































































































































































































































































			oView.byId("newProdTaxRatio").removeAllItems();































































































































































































































































			































































































































































































































































			oView.byId("newProdTaxRatio").addItem(new sap.ui.core.Item({































































































































































































































































				key	: "",































































































































































































































































				text: ""































































































































































































































































			}));































































































































































































































































			































































































































































































































































			for (var i = 0; i < oTaxData.results.length; i++) {































































































































































































































































				if (oTaxData.results[i].Kschl == "MWSI")































































































































































































































































					oView.byId("newProdTaxRatio").addItem(new sap.ui.core.Item({































































































































































































































































						key	: oTaxData.results[i].Taxkm,































































































































































































































































						text: oTaxData.results[i].TaxVtext































































































































































































































































					}));































































































































































































































































			}































































































































































































































































			































































































































































































































































			oView.byId("newProdTaxType").setSelectedKey("MWSI");































































































































































































































































			oView.byId("newProdTaxRatio").setSelectedKey("3");































































































































































































































































		}































































































































































































































































		































































































































































































































































		// check required fields on third step































































































































































































































































		if (iStepIndex == 4) {































































































































































































































































			if (oView.byId("newProdBranchPrice").getValueState() == "Error") {































































































































































































































































				var oMessageData = { TYPE:"E", MESSAGE:"Hatalı bayi fiyatı!"};































































































































































































































































				oController.showMessage(oMessageData);































































































































































































































































				return;































































































































































































































































			}































































































































































































































































			































































































































































































































































			var aTaxList = oView.byId("newProdTaxesTable").getItems();































































































































































































































































			var bKdvFound = false;































































































































































































































































			































































































































































































































































			for (var i = 0; i < aTaxList.length; i++) {































































































































































































































































				if (aTaxList[i].getCells()[2].getText() == "MWSI") bKdvFound = true;































































































































































































































































			}































































































































































































































































			































































































































































































































































			if (!bKdvFound) {































































































































































































































































				var oMessageData = { TYPE:"E", MESSAGE:"KDV Girin!"};































































































































































































































































				oController.showMessage(oMessageData);































































































































































































































































				return;































































































































































































































































			}































































































































































































































































		}































































































































































































































































		































































































































































































































































		if (iStepIndex != 3 || oView.byId("newProdStockCode").getValue().length <= 0) { // navigation is done after checks for step 3































































































































































































































































			// set selected step































































































































































































































































			oView.byId(sCurrentStep).setEnabled(false);































































































































































































































































			oView.byId(sNextStep).setEnabled(true);		































































































































































































































































			oRoadMap.setSelectedStep(sNextStep);































































































































































































































































		































































































































































































































































			// navigate to next page































































































































































































































































			sNextPage = sCurrentPage.substring(0, sCurrentPage.length - 1) + String(iStepIndex);































































































































































































































































			oNavContainer.to(sNextPage);































































































































































































































































		































































































































































































































































			// set footer buttons for the last page































































































































































































































































			if (iStepIndex == 4) {































































































































































































































































				oFooter.destroyContent();































































































































































































































































				oFooter.addContent(new sap.m.ToolbarSpacer());































































































































































































































































				oFooter.addContent(new sap.m.Button({ text	: "Geri",































































































































































































































































				  								  	  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  	  icon	: "sap-icon://slim-arrow-left",































































































































































































































































				  								  	  press: oController.newProdRoadMapBack }));































































































































































































































































				oFooter.addContent(new sap.m.Button({ text	: "Kaydet ve Onaya Gönder",































































































































































































































































				  								  	  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  	  icon	: "sap-icon://save",































































































































































































































































				  								  	  press: oController.saveNewProd }));































































































































































































































































			}































































































































































































































































		}































































































































































































































































		































































































































































































































































		if (iStepIndex == 3) {































































































































































































































































			oFooter.destroyContent();































































































































































































































































			oFooter.addContent(new sap.m.ToolbarSpacer());































































































































































































































































			oFooter.addContent(new sap.m.Button({ text	: "Sil",































































































































































































































































				  								  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  icon	: "sap-icon://delete",































































































































































































































































				  								  press: oController.deleteTaxEntry }));































































































































































































































































			oFooter.addContent(new sap.m.Button({ text	: "Geri",































































































































































































































































				  								  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  icon	: "sap-icon://slim-arrow-left",































































































































































































































































				  								  press: oController.newProdRoadMapBack }));































































































































































































































































			oFooter.addContent(new sap.m.Button({ text	: "İleri",































































































































































































































































				  								  type	: sap.m.ButtonType.Emphasized,































































































































































































































































				  								  icon	: "sap-icon://slim-arrow-right",































































































































































































































































				  								  press: oController.newProdRoadMapForward }));































































































































































































































































		}































































































































































































































































	},































































































































































































































































	































































































































































































































































	checkStockCode	: function(stockCode, sCurrentStep, sNextStep, sCurrentPage) {































































































































































































































































		































































































































































































































































		var oModel = new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/", true);































































































































































































































































		var oView  = sap.ui.getCore().byId("CreateNewProduct");































































































































































































































































		var oBusyDialog = new sap.m.BusyDialog({ text : "Lütfen bekleyiniz" });































































































































































































































































		var oExtDialog;































































































































































































































































		var oFilter = [































































































































































































































































		               new sap.ui.model.Filter("Matnr",    sap.ui.model.FilterOperator.EQ, stockCode),































































































































































































































































		               new sap.ui.model.Filter("DealerId", sap.ui.model.FilterOperator.EQ, sDealerID)































































































































































































































































					  ];































































































































































































































































		































































































































































































































































		var mParameters = { async			: true,































































































































































































































































							filters 	  	: oFilter,































































































































































































































































							urlParameters 	: null,































































































































































































































































							success			: function(oData, oResponse) {































































































































































































































































												































































































































































































































































												oBusyDialog.close();































































































































































































































































												































































































































































































































































												switch (oData.results[0].Subrc) {































































































































































































































































												case "0": // navigate to next step































































































































































































































































													oView.byId(sCurrentStep).setEnabled(false);































































































































































































































































													oView.byId(sNextStep).setEnabled(true);		































































































































































































































































													oView.byId("newProdRoadMap").setSelectedStep(sNextStep);































































































































































































































































													































































































































































































































































													var sNextPage = sCurrentPage.substring(0, sCurrentPage.length - 1) + "3";































































































































































































































































													oView.byId("newProdNavContainer").to(sNextPage);































































































































































































































































													break;































































































































































































































































												case "1": // navigate to product































































































































































































































































													var oMessageData = {































































































































































































































































														TYPE: "I",































































































































































































































































														MESSAGE: stockCode + " Kodlu ürün mevcut, ürün arama ekranından ulaşabilirsiniz"































































































































































































































































															};































































































































































































































































													oView.getController().showMessage(oMessageData);































































































































































































































































													break;































































































































































































































































												case "2": // open extention dialog































































































































































































































































													var oExtentionText = new sap.m.Text({ text: "Ürün mevcut, kullanmak istiyor musunuz?" });































































































































































































































































													if (!oExtDialog) {































































































































































































































































														oExtDialog = new sap.m.Dialog({































































































































































































































































															title		: stockCode + " Kodlu ürün",































































































































































































































































															rightButton	: new sap.m.Button({































































































































































































































































																text	: "Hayır",































































































































































































































































																type	: sap.m.ButtonType.Emphasized,































































































































































































































































																icon 	: "sap-icon://decline",































































































































































































































































																press	: function(){ this.oParent.close(); }































































































































































































































































															}),































































































































































































































































															leftButton: new sap.m.Button({































































































































































































































































																text	: "Evet",































































































































































































































































																type	: sap.m.ButtonType.Emphasized,































































































































































































































































																icon 	: "sap-icon://accept",































































































































































































































































																press	: function(){































































































































































































































































																	































































































































































































































































																	this.oParent.close()































































































































































































































































																	































































































































































































































































																	oBusyDialog.open();































































































































































































































































																	































































































































































































































































																	var requestProdHeader = {};































































































































































































































































																	































































































































































































































































																	requestProdHeader.Matnr 	= stockCode;































































































































































































































































																	requestProdHeader.DealerId 	= sDealerID;































































































































































































































































																	requestProdHeader.Subrc		= "";































































































































































































































































																	































































































































































































































































																	oModel.setHeaders({































































































































































































































































															  			"Access-Control-Allow-Origin" : "*",  































































































































































































































































															  			"Content-Type": "application/x-www-form-urlencoded",  































































































































































































































































															  			"X-CSRF-Token":"Fetch"































































































































































































































































															  		 });  































































































































































































































































































































































































































































































































																	var token;































































































































































































































































																	































































































































































































































































																	oModel.read('/ifMatExistSet',   































































































































































































































































																		  	null,   































































































































































































































































																		  	null,   































































































































































































































































																		  	false,   































































































































































































































































																		  	function(oData, oResponse) {  































































































































































































































































																		  		token = oResponse.headers['x-csrf-token'];  































































































































































































































































																		  	},  































































































































































































































































																		  	function() {  































































































































































































































































																		  		console.log("Error on read process");  































































































































































































































































																		  	}  































































































































































































































































																		  );































































































































































































































































																































































































































































































































































																 oModel.setHeaders({  































































































































































































































































																		  			"X-Requested-With": "XMLHttpRequest",































































































































































































































































																		  			"Content-Type": "application/json",































































































































































































































































																		  			"DataServiceVersion": "2.0",































































































































































































































































																		  			"Accept": "application/atom+xml,application/atomsvc+xml,application/xml",































































































































































































































































																		  			"X-CSRF-Token": token































































































































































































































































																		  		  });































































































































































































































































																 































































































































































































































































																 console.log(requestProdHeader);































































































































































































































































																 































































































































































































































































																 oModel.create('/ifMatExistSet',   































































































































































































































































																		 		requestProdHeader,   































































































































































































































































																		  		null,   































































































































































































































































																		  		function(oData, oResponse) {































































































































































































































































																	 				var oMessageData;































































































































































































































































																	 	































































































































































































































































																	 				oData.Subrc == "0" ?































































































































































































































































																	 					oMessageData = { TYPE:"S", MESSAGE:"Ürün genişletildi, ürün arama ekranında ulaşabilirsiniz"} :































































































































































































































































																	 					oMessageData = { TYPE:"E", MESSAGE:"Ürün genişletilemedi!"};































































































































































































































































																	 				































































































































































































































































																	 				oView.getController().showMessage(oMessageData);































































































































































































































































																		  			oBusyDialog.close();																		  						  			 































































































































































































































































																		  		},  































































































































































































































































																		  		function() {   































































































































































































































































																		  			oBusyDialog.close();































































































































































































































































																		  			var oMessageData = { TYPE:"E", MESSAGE:"Bağlantı hatası!"};































































































































































































































































																					oView.getController().showMessage(oMessageData); 































































































































































































































































																		  		}); 































































































































































































































































																}						































































































































































































































































															}),































































































































































































































































															content: [ oExtentionText ]































































































































































































































































															});































































































































































































































































													}































































































































































































































































															































































































































































































































































													oExtDialog.open();































































































































































































































































													break;































































































































































































































































												default:































































































































































































































































													break;































































































































































































































































												}































































































































































































































































								  			  },































































































































































































































































							error			: function() {































































































































































































































































												oBusyDialog.close();































































































































































































































































												var oMessageData = { TYPE:"E", MESSAGE:"Bağlantı hatası!"};































































































































































































































































												oView.getController().showMessage(oMessageData);































































































































































































































































								  			  }































































































































































































































































						  };































































































































































































































































































































































































































































































































		oBusyDialog.open();































































































































































































































































		oModel.read("/ifMatExistSet", mParameters);































































































































































































































































	},































































































































































































































































	































































































































































































































































	setColor	: function(oView, hier) {































































































































































































































































		































































































































































































































































		var that = oView.getController();































































































































































































































































		































































































































































































































































		oView.byId("newProdColor").removeAllItems();































































































































































































































































		oView.byId("newProdColor").setValue("");































































































































































































































































		































































































































































































































































		var oBusyDialog = new sap.m.BusyDialog({ text : "Lütfen bekleyiniz" });































































































































































































































































		































































































































































































































































		// model for hierarchy table































































































































































































































































		var oModel  = new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/", false);		































































































































































































































































		var oFilter = [ new sap.ui.model.Filter("Matkl", sap.ui.model.FilterOperator.EQ, hier) ];	































































































































































































































































		































































































































































































































































		var mParameters = { async			: true,































































































































































































































































							filters 	  	: oFilter,































































































































































































































































							urlParameters 	: null,































































































































































































































































							success			: function(oData) {































































































































































































































































								































































































































































































































































												if (oData.results.length > 0) { 































































































































































































































































													oView.byId("newProdColor").setVisible(true);































































































































































































































































													oView.byId("newProdColor").setEnabled(true);































































































































































































































































													that.model.setProperty("/colorState", "Error");































































































































































































































































												}































































































































































































































































												else { 































































































































































































































































													oView.byId("newProdColor").setVisible(false);































































































































































































































































													oView.byId("newProdColor").setEnabled(false)































































































































































































































































													that.model.setProperty("/colorState", "None");































































































































































































































































												}































































































































































































































































								































































































































































































































































												for (var i = 0; i < oData.results.length; i++) {































































































































































































































































													oView.byId("newProdColor").addItem(new sap.ui.core.Item({































































































































































































































































														key	: oData.results[i].Atwrt,































































































































































































































































														text: oData.results[i].Atwtb































































































































































































































































													}));































































































































































































































































												}































































































































































































































































									































































































































































































































































												oBusyDialog.close();































































































































































































































































								  			  },































































































































































































































































							error			: function() {































































































































































































































































												oBusyDialog.close();































































































































































































































































												var oMessageData = { TYPE:"E", MESSAGE:"Bağlantı hatası!"};































































































































































































































































												that.showMessage(oMessageData);































































































































































































































































								  			  }































































































































































































































































						  };































































































































































































































































































































































































































































































































		oBusyDialog.open();































































































































































































































































		oModel.read("/colorCharactSet", mParameters);































































































































































































































































	},































































































































































































































































	































































































































































































































































	onHierCellClick	: function(oEvent) {































































































































































































































































		var oView = sap.ui.getCore().byId("CreateNewProduct");































































































































































































































































		oView.byId("newProdTreeTable").setSelectedIndex(oEvent.getParameter("rowIndex"));































































































































































































































































		































































































































































































































































		oView.byId("newProdTreeTable").isExpanded(oEvent.getParameter("rowIndex")) ?































































































































































































































































				oView.byId("newProdTreeTable").collapse(oEvent.getParameter("rowIndex")) : 































































































































































































































































				oView.byId("newProdTreeTable").expand(oEvent.getParameter("rowIndex"));































































































































































































































































	},































































































































































































































































	































































































































































































































































/**































































































































































































































































* Save new product for approval































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































	saveNewProd	: function(oEvent) {































































































































































































































































		































































































































































































































































		var oModel 		= new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/", true);































































































































































































































































		var oBusyDialog = new sap.m.BusyDialog({ text : "Lütfen bekleyiniz" });	































































































































































































































































		var oView 		= sap.ui.getCore().byId("CreateNewProduct");































































































































































































































































		var that		= oView.getController();































































































































































































































































		































































































































































































































































		// check if any attachment exists































































































































































































































































		if (oView.byId("newProdCollectionUploader").getItems().length <= 0) {































































































































































































































































			var oMessageData = { TYPE: "E", MESSAGE: "En az bir adet dosya ekleyiniz" };				































































































































































































































































			oView.getController().showMessage(oMessageData);































































































































































































































































			return;































































































































































































































































		}































































































































































































































































		































































































































































































































































		oBusyDialog.open();































































































































































































































































		































































































































































































































































		var aTaxes = oView.byId("newProdTaxesTable").getItems();































































































































































































































































		var fKdv		= "";































































































































































































































































		var fOiv		= "";































































































































































































































































		var fRuhsat		= "";































































































































































































































































		var fKullanim	= "";































































































































































































































































		var sIsSerial	= "";































































































































































































































































		































































































































































































































































		for (var i = 0; i < aTaxes.length; i++) {































































































































































































































































			switch (aTaxes[i].getCells()[2].getText()) {































































































































































































































































			case "MWSI":































































































































































































































































				fKdv = aTaxes[i].getCells()[3].getText();































































































































































































































































				break;































































































































































































































































			case "ZV01":































































































































































































































































				fOiv = aTaxes[i].getCells()[3].getText();































































































































































































































































				break;































































































































































































































































			case "ZV04":































































































































































































































































				fKullanim = aTaxes[i].getCells()[3].getText();































































































































































































































































				break;































































































































































































































































			case "ZV05":































































































































































































































































				fRuhsat = aTaxes[i].getCells()[3].getText();































































































































































































































































				break;































































































































































































































































			default:































































































































































































































































				break;































































































































































































































































			}































































































































































































































































		}































































































































































































































































		































































































































































































































































		var requestProdHeader = {};































































































































































































































































		































































































































































































































































		requestProdHeader.Matnr 		= oView.byId("newProdStockCode").getValue();































































































































































































































































		requestProdHeader.Maktx 		= oView.byId("newProdDescription").getValue();































































































































































































































































		requestProdHeader.Renk			= oView.byId("newProdColor").getSelectedKey();































































































































































































































































		requestProdHeader.Matkl 		= sSelectedHierarchy;































































































































































































































































		requestProdHeader.DealerId 		= sDealerID;































































































































































































































































		requestProdHeader.BayiFiyat 	= oView.byId("newProdBranchPrice").getValue();































































































































































































































































		requestProdHeader.Seriu			= sIsSerial;































































































































































































































































		requestProdHeader.KdvOrani		= fKdv;































































































































































































































































		requestProdHeader.OivOrani		= fOiv;































































































































































































































































		requestProdHeader.RuhsatUcret	= fRuhsat;































































































































































































































































		requestProdHeader.KullanimUcret	= fKullanim;































































































































































































































































		requestProdHeader.Ztext			= "";































































































































































































































































		requestProdHeader.Message		= "";































































































































































































































































		































































































































































































































































		oModel.setHeaders({































































































































































































































































  			"Access-Control-Allow-Origin" : "*",  































































































































































































































































  			"Content-Type": "application/x-www-form-urlencoded",  































































































































































































































































  			"X-CSRF-Token":"Fetch"































































































































































































































































  		 });  































































































































































































































































































































































































































































































































		var token;































































































































































































































































		































































































































































































































































		oModel.read('/changeCreateMatSet',   































































































































































































































































			  	null,   































































































































































































































































			  	null,   































































































































































































































































			  	false,   































































































































































































































































			  	function(oData, oResponse) {  































































































































































































































































			  		token = oResponse.headers['x-csrf-token'];  































































































































































































































































			  	},  































































































































































































































































			  	function() {  































































































































































































































































			  		alert("Error on read process");  































































































































































































































































			  	}  































































































































































































































































			  );































































































































































































































































	































































































































































































































































	 oModel.setHeaders({  































































































































































































































































			  			"X-Requested-With": "XMLHttpRequest",































































































































































































































































			  			"Content-Type": "application/json",































































































































































































































































			  			"DataServiceVersion": "2.0",































































































































































































































































			  			"Accept": "application/atom+xml,application/atomsvc+xml,application/xml",































































































































































































































































			  			"X-CSRF-Token": token































































































































































































































































			  		  });































































































































































































































































	 































































































































































































































































	 console.log(requestProdHeader);































































































































































































































































	 































































































































































































































































	 oModel.create('/changeCreateMatSet',   































































































































































































































































			 		requestProdHeader,   































































































































































































































































			  		null,   































































































































































































































































			  		function(oData, oResponse) {































































































































































































































































			  			oBusyDialog.close();































































































































































































































































			  			var bSuccess;































































































































































































































































			  			































































































































































































































































			  			oData.Matnr.length > 1 ? bSuccess = true : bSuccess = false;































































































































































































































































			  			































































































































































































































































			  			if(bSuccess) {































































































































































































































































			  				var oMessageData = {































































































































































































































































				  					TYPE:"S", MESSAGE: oData.Matnr + " Kodlu ürün talebi başarıyla oluşturulmuştur\n" +































































































































































































































































				  									   "Satış yönetcinize bilgilendirme emaili gönderilmiştir\n" // +































































































































































































































































//				  									   oData.Message































































































































































































































































				  					};































































































































































































































































			  				































































































































































































































































			  				that.sendAttachments(oData.Matnr);































































































































































































































































			  				































































































































































































































































							oView.getController().showMessage(oMessageData);































































































































































































































































							that.navBack();































































































































































































































































			  			}































































































































































































































































			  			else {































































































































































































































































			  				var oMessageData = {































































































































































































































































				  					TYPE:"E", MESSAGE: oData.Message































































































































































































































































				  					};































































































































































































































































			  				































































































































































































































































							oView.getController().showMessage(oMessageData);































































































































































































































































			  			}			  			 































































































































































































































































			  		},  































































































































































































































































			  		function() {   































































































































































































































































			  			oBusyDialog.close();































































































































































































































































			  			var oMessageData = { TYPE:"E", MESSAGE:"Değişiklikler kaydedilemedi!"};































































































































































































































































						oView.getController().showMessage(oMessageData); 































































































































































































































































			  		}); 































































































































































































































































	},































































































































































































































































	































































































































































































































































	sendAttachments	: function(sCreatedMatnr) {































































































































































































































































		var oModel 		= new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/", true);































































































































































































































































		var oView 		= sap.ui.getCore().byId("CreateNewProduct");































































































































































































































































		var that		= oView.getController();































































































































































































































































		































































































































































































































































		var aItems = oView.byId("newProdCollectionUploader").getItems();































































































































































































































































		































































































































































































































































		oModel.setHeaders({































































































































































































































































  			"Access-Control-Allow-Origin" : "*",  































































































































































































































































  			"Content-Type": "application/x-www-form-urlencoded",  































































































































































































































































  			"X-CSRF-Token":"Fetch"































































































































































































































































  		 });  































































































































































































































































































































































































































































































































		var token;































































































































































































































































		































































































































































































































































		oModel.read('/attachmentNewSet',   































































































































































































































































			  	null,   































































































































































































































































			  	null,   































































































































































































































































			  	false,   































































































































































































































































			  	function(oData, oResponse) {  































































































































































































































































			  		token = oResponse.headers['x-csrf-token'];  































































































































































































































































			  	},  































































































































































































































































			  	function() {  































































































































































































































































			  		console.log("Error on read process");  































































































































































































































































			  	}  































































































































































































































































			  );































































































































































































































































	































































































































































































































































	 oModel.setHeaders({  































































































































































































































































			  			"X-Requested-With": "XMLHttpRequest",































































































































































































































































			  			"Content-Type": "application/json",































































































































































































































































			  			"DataServiceVersion": "2.0",































































































































































































































































			  			"Accept": "application/atom+xml,application/atomsvc+xml,application/xml",































































































































































































































































			  			"X-CSRF-Token": token































































































































































































































































			  		  }); 































































































































































































































































	 































































































































































































































































	 for (var i = 0; i < aItems.length; i++) {































































































































































































































































			































































































































































































































































		var requestAttachmentHeader = {};































































































































































































































































			































































































































































































































































		requestAttachmentHeader.Matnr = sCreatedMatnr;































































































































































































































































		requestAttachmentHeader.Guid  = aItems[i].getDocumentId();































































































































































































































































		































































































































































































































































		console.log(requestAttachmentHeader);































































































































































































































































		 































































































































































































































































		oModel.create('/attachmentNewSet',   































































































































































































































































						requestAttachmentHeader,   































































































































































































































































				  		null,   































































































































































































































































				  		function(oData, oResponse) {































































































































































































































































			 				console.log(oData);	 































































































































































































































































				  		},  































































































































































































































































				  		function() {}); 































































































































































































































































	 	}	 































































































































































































































































	},































































































































































































































































	































































































































































































































































/**































































































































































































































































* Row selection event































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/	































































































































































































































































	onRowSelection	: function(oEvent) {































































































































































































































































		































































































































































































































































	},































































































































































































































































	































































































































































































































































/**































































































































































































































































* Add tax































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































	addTax	: function() {































































































































































































































































		































































































































































































































































		var that = this;































































































































































































































































		































































































































































































































































		var taxTable = this.getView().byId("newProdTaxesTable");































































































































































































































































		var aTexes	 = taxTable.getItems();































































































































































































































































		var taxType	 = this.getView().byId("newProdTaxType").getSelectedItem().getText();































































































































































































































































		var taxRatio = this.getView().byId("newProdTaxRatio").getSelectedItem().getText();































































































































































































































































		var taxCode	 = this.getView().byId("newProdTaxType").getSelectedItem().getKey();































































































































































































































































		var valCode	 = this.getView().byId("newProdTaxRatio").getSelectedItem().getKey();































































































































































































































































		var bExists  = false;































































































































































































































































		































































































































































































































































		// check tax already exists































































































































































































































































		for (var i = 0; i < aTexes.length; i++) {































































































































































































































































			if (aTexes[i].getCells()[2].getText() == taxCode) bExists = true;































































































































































































































































		}































































































































































































































































		































































































































































































































































		if (bExists) {































































































































































































































































			var oMessageData = { TYPE:"E", MESSAGE:"Vergi tipi mevcut!"};































































































































































































































































			that.showMessage(oMessageData);































































































































































































































































			return;































































































































































































































































		}			































































































































































































































































		































































































































































































































































		taxTable.addItem(new sap.m.ColumnListItem({































































































































































































































































			cells: [































































































































































































































































			        new sap.m.ObjectIdentifier({text: taxType}),































































































































































































































































			        new sap.m.ObjectNumber({number: taxRatio}),































































































































































































































































			        new sap.m.Text({text: taxCode}),































































































































































































































































			        new sap.m.Text({text: valCode})































































































































































































































































			        ]































































































































































































































































		}));		































































































































































































































































































































































































































































































































		that.getView().byId("newProdTaxType").setSelectedKey("dummy");































































































































































































































































		that.getView().byId("newProdTaxRatio").setValue("");































































































































































































































































		that.getView().byId("newProdTaxRatio").removeAllItems();































































































































































































































































	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Remove tax































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































	deleteTaxEntry	: function(oEvent) {































































































































































































































































		































































































































































































































































//		var taxTable = oEvent.getSource().oParent.oParent;































































































































































































































































		var taxTable = sap.ui.getCore().byId("CreateNewProduct").byId("newProdTaxesTable");































































































































































































































































		var aSelectedItems = taxTable.getSelectedItems();































































































































































































































































		































































































































































































































































		for (var i = 0; i < aSelectedItems.length; i++) {































































































































































































































































			taxTable.removeItem(aSelectedItems[i]);































































































































































































































































		}































































































































































































































































	},































































































































































































































































	































































































































































































































































/**































































































































































































































































* Input field validations































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/	































































































































































































































































	generalInfoValidation	: function() {































































































































































































































































		































































































































































































































































		jQuery.sap.require("sap.ui.core.format.NumberFormat");































































































































































































































































		jQuery.sap.require("sap.ui.core.format.NumberFormat");































































































































































































































































				var oNumberFormat = sap.ui.core.format.NumberFormat.getFloatInstance({































































































































































































































































					  minFractionDigits: 1,































































































































































































































































					  maxFractionDigits: 2,































































































































































































































































					  groupingEnabled: false,































































































































































































































































					  decimalSeparator: ","































































































































































































































































					});































































































































































































































































		































































































































































































































































//		var stockCode 	= this.getView().byId("newProdStockCode").getValue();































































































































































































































































		var prodDesc  	= this.getView().byId("newProdDescription").getValue();































































































































































































































































		var branchPrice = this.getView().byId("newProdBranchPrice").getValue();































































































































































































































































		































































































































































































































































//		isNaN(stockCode) || stockCode.length == 0 ? this.model.setProperty("/stockCodeState", "Error") : this.model.setProperty("/stockCodeState", "None");	































































































































































































































































		prodDesc.length == 0 ? this.model.setProperty("/prodDescriptionState", "Error") : this.model.setProperty("/prodDescriptionState", "None");































































































































































































































































		































































































































































































































































		isNaN(oNumberFormat.parse(branchPrice)) 	||































































































































































































































































		branchPrice.length == 0 					||































































































































































































































































		oNumberFormat.parse(branchPrice) > 99999.99 || 































































































































































































































































		branchPrice.indexOf(".") != -1 ? this.model.setProperty("/branchPriceState", "Error") : this.model.setProperty("/branchPriceState", "None");		































































































































































































































































	},































































































































































































































































	































































































































































































































































	onColorSelected	: function(oEvent) {































































































































































































































































		var that = sap.ui.getCore().byId("CreateNewProduct").getController();































































































































































































































































		































































































































































































































































		var sSelectedKey = oEvent.getSource().getSelectedKey();































































































































































































































































		































































































































































































































































		sSelectedKey == "" ? that.model.setProperty("/colorState", "Error") : that.model.setProperty("/colorState", "None");































































































































































































































































	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Display message































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/	































































































































































































































































		showMessage	: function(data) {































































































































































































































































			































































































































































































































































			jQuery.sap.require("sap.m.MessageBox");































































































































































































































































			































































































































































































































































			var oIcon, sTitle;































































































































































































































































			































































































































































































































































			switch (data.TYPE) {































































































































































































































































			case "S": oIcon = sap.m.MessageBox.Icon.SUCCESS; 	 break;































































































































































































































































			case "I": oIcon = sap.m.MessageBox.Icon.INFORMATION; break;































































































































































































































































			case "E": oIcon = sap.m.MessageBox.Icon.ERROR;		 break;































































































































































































































































			case "W": oIcon = sap.m.MessageBox.Icon.WARNING;	 break;































































































































































































































































			default: break;































































































































































































































































			}































































































































































































































































			































































































































































































































































	    	sap.m.MessageBox.show( data.MESSAGE, { icon		: oIcon,































































































































































































































































	    										   title	: sTitle,































































































































































































































































	    		          		   				   actions	: [sap.m.MessageBox.Action.OK],































































































































































































































































	    		      							 });































































































































































































































































		},































































































































































































































































		































































































































































































































































/**































































































































































































































































* Add attachment































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/	































































































































































































































































	addProdAttachment	: function(oEvent) {































































































































































































































































































































































































































































































































	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Remove attachment































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/	































































































































































































































































	deleteAttachment	: function(oEvent) {































































































































































































































































		































































































































































































































































		console.log("delete invoked");































































































































































































































































































































































































































































































































		var oModel 		= new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/", false);































































































































































































































































		var oBusyDialog = new sap.m.BusyDialog({ text : "Lütfen bekleyiniz" });































































































































































































































































		var oUploader 	= this.getView().byId("newProdCollectionUploader");































































































































































































































































		var oData 		= oUploader.getModel().getData();































































































































































































































































		var aItems 		= jQuery.extend(true, {}, oData).items;































































































































































































































































		var sDocumentId = oEvent.getParameter("documentId");































































































































































































































































		var bDeleted 	= false;































































































































































































































































		































































































































































































































































		var sReadURL = "/attachmentNewSet(Guid='" + sDocumentId + "')";































































































































































































































































		































































































































































































































































		var mParameters = { async			: true,































































































































































































































































							filters 	  	: null,































































































































































































































































							urlParameters 	: null,































































































































































































































































							success			: function(oData, oResponse) {		































































































































































































































































												// remove from uploader































































































































































































































































												jQuery.each(aItems, function(index){































































































































































































































































													if (aItems[index] && aItems[index].documentId === sDocumentId) {































































































































































































































































														aItems.splice(index, 1);































































































































































































































































													};































































































































































































































































												});































































































































































































































































								































































































































































































































































												oUploader.getModel().setData({































































































































































































































































													"items" : aItems































































































































































































































































												});































































































































































































































































												































































































































































































































































												oBusyDialog.close();































































































































































































































































								  			  },































































































































































































































































							error			: function(oData, oResponse) {































































































































































































































































												oBusyDialog.close();































































































































































































































































												var oMessageData = { TYPE:"E", MESSAGE:"Bağlantı hatası!"};































































































































































































































































												sap.ui.getCore().byId("CreateNewProduct").getController().showMessage(oMessageData);































































































































































































































































								  			  }































































































































































































































































						  };































































































































































































































































































































































































































































































































		oBusyDialog.open();































































































































































































































































		oModel.remove(sReadURL, mParameters);































































































































































































































































	},































































































































































































































































	































































































































































































































































	onBeforeUploadStarts	: function(oEvent) {































































































































































































































































		console.log("onBeforeUploadStarts");































































































































































































































































		































































































































































































































































		var oUploadCollection = oEvent.getSource();































































































































































































































































		































































































































































































































































		oUploadCollection.insertHeaderParameter(new sap.m.UploadCollectionParameter({































































































































































































































































			name: "slug",































































































































































































































































			value: unescape(encodeURIComponent(oUploadCollection.getParameter("fileName")))































































































































































































































































		}));































































































































































































































































	},































































































































































































































































	































































































































































































































































	onChange	: function(oEvent) {































































































































































































































































		































































































































































































































































		var oModel = new sap.ui.model.odata.ODataModel("/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/", false);































































































































































































































































		var oUploadCollection = oEvent.getSource();































































































































































































































































		































































































































































































































































		oModel.refreshSecurityToken();































































































































































































































































		































































































































































































































































		var oHeaders = oModel.oHeaders;































































































































































































































































        var sToken = oHeaders['x-csrf-token'];































































































































































































































































        var oHeaderParameter = new sap.m.UploadCollectionParameter({































































































































































































































































        	name: "x-csrf-token",































































































































































































































































        	value: sToken































































































































































































































































        });































































































































































































































































































































































































































































































































        oUploadCollection.addHeaderParameter(oHeaderParameter);































































































































































































































































        































































































































































































































































        oUploadCollection.insertHeaderParameter(new sap.m.UploadCollectionParameter({































































































































































































































































			name: "slug",































































































































































































































































			value: unescape(encodeURIComponent(oEvent.getParameters().mParameters.newValue))































































































































































































































































		}));































































































































































































































































		































































































































































































































































		var sUploadURL = "/sap/opu/odata/sap/ZGW_AKILLI_KASA_SRV_01/attachmentListSet('" + "" + "')/attachmentSet";































































































































































































































































		































































































































































































































































		oUploadCollection.setUploadUrl(sUploadURL);































































































































































































































































	},































































































































































































































































	































































































































































































































































	onUploadComplete	: function(oEvent) {































































































































































































































































		































































































































































































































































		console.log(oEvent.getParameters());































































































































































































































































		































































































































































































































































		var that = this;































































































































































































































































		































































































































































































































































		var oData;































































































































































































































































		































































































































































































































































		var oUploader = this.getView().byId("newProdCollectionUploader");































































































































































































































































		































































































































































































































































		if (oUploader.getModel() != undefined)































































































































































































































































			oData = oUploader.getModel().getData();































































































































































































































































		else {































































































































































































































































			var oModel = new sap.ui.model.json.JSONModel();































































































































































































































































			oUploader.setModel(oModel);































































































































































































































































			oData = {};































































































































































































































































		}































































































































































































































































		































































































































































































































































		var aItems = jQuery.extend(true, {}, oData).items;































































































































































































































































		var oItem  = {};































































































































































































































































		var sUploadedFile = oEvent.getParameter("files")[0].fileName;































































































































































































































































		var aResponse = oEvent.getParameters().mParameters.response.split("ObjkeyB='");































































































































































































































































		































































































































































































































































		if (!aResponse[1]) {































































































































































































































































			var oMessageData = { TYPE:"E", MESSAGE:"Ek yüklenemedi!"};































































































































































































































































			that.showMessage(oMessageData);































































































































































































































































			return;































































































































































































































































		}































































































































































































































































		var sDocumentId = aResponse[1].substring(0,32);































































































































































































































































		































































































































































































































































		if (aItems == undefined) aItems	= [];































































































































































































































































		































































































































































































































































		if (!sUploadedFile) {































































































































































































































































			var aUploadedFile = (oEvent.getParameters().getSource().getProperty("value")).split(/\" "/);































































































































































































































































			sUploadedFile = aUploadedFile[0];































































































































































































































































		}































































































































































































































































		































































































































































































































































		var oItem = {































































































































































































































































						"documentId" 	: sDocumentId,































































































































































































































































						"fileName"		: sUploadedFile,































































































































































































































































						"mimeType"		: "",































































































































































































































































						"url"			: "",































































































































































































































































						"enableEdit"	: false,































































































































































































































































						"enableDelete"	: true,































































































































































































































































						"visibleEdit"	: false































































































































































































































































					}































































































































































































































































		































































































































































































































































		aItems.unshift(oItem);































































































































































































































































		































































































































































































































































		oUploader.getModel().setData({































































































































































































































































			"items" : aItems































































































































































































































































		});































































































































































































































































	},































































































































































































































































	































































































































































































































































	onUploadTerminated	: function(oEvent) {































































































































































































































































		































































































































































































































































		var sFileName = oEvent.getParameter("fileName");































































































































































































































































		var oRequestHeaders = oEvent.getParameters().getHeaderParameter();































































































































































































































































		































































































































































































































































		console.log(sFileName);































































































































































































































































		console.log(oRequestHeaders);































































































































































































































































	},































































































































































































































































	































































































































































































































































	onTypeMissmatch	: function() {































































































































































































































































		var oMessageData = { TYPE:"E", MESSAGE:"Seçtiğiniz dosya tipi desteklenmiyor!"};































































































































































































































































		this.showMessage(oMessageData);































































































































































































































































	},































































































































































































































































	































































































































































































































































	handleSelectionChange	: function(oEvent) {































































































































































































































































		































































































































































































































































	},































































































































































































































































































































































































































































































































	showMessage	: function(data) {































































































































































































































































		































































































































































































































































		jQuery.sap.require("sap.m.MessageBox");































































































































































































































































		































































































































































































































































		var oIcon, sTitle;































































































































































































































































		































































































































































































































































		switch (data.TYPE) {































































































































































































































































		case "S": oIcon = sap.m.MessageBox.Icon.SUCCESS; 	 break;































































































































































































































































		case "I": oIcon = sap.m.MessageBox.Icon.INFORMATION; break;































































































































































































































































		case "E": oIcon = sap.m.MessageBox.Icon.ERROR;		 break;































































































































































































































































		case "W": oIcon = sap.m.MessageBox.Icon.WARNING;	 break;































































































































































































































































		default: break;































































































































































































































































		}































































































































































































































































		































































































































































































































































    	sap.m.MessageBox.show( data.MESSAGE, { icon		: oIcon,































































































































































































































































    										   title	: sTitle,































































































































































































































































    		          		   				   actions	: [sap.m.MessageBox.Action.OK],































































































































































































































































    		      							 });































































































































































































































































	},































































































































































































































































	































































































































































































































































/**































































































































































































































































* Similar to onAfterRendering, but this hook is invoked before the controller's View is re-rendered































































































































































































































































* (NOT before the first rendering! onInit() is used for that one!).































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































//	onBeforeRendering: function() {































































































































































































































































//































































































































































































































































//	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Called when the View has been rendered (so its HTML is part of the document). Post-rendering manipulations of the HTML could be done here.































































































































































































































































* This hook is the same one that SAPUI5 controls get after being rendered.































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































//	onAfterRendering: function() {































































































































































































































































//































































































































































































































































//	},































































































































































































































































































































































































































































































































/**































































































































































































































































* Called when the Controller is destroyed. Use this one to free resources and finalize activities.































































































































































































































































* @memberOf zui5_ttg_app001.CreateNewProduct































































































































































































































































*/































































































































































































































































//	onExit: function() {































































































































































































































































//































































































































































































































































//	}































































































































































































































































































































































































































































































































});































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































